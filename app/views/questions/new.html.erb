<div id="question">
  <h2>添削希望メッセージの投稿</h2>
    <%= form_with model: @question, url: questions_path, local: true do |f| %>
      <div class="field">
        <label class="form-text">相談タイトル</label>
        <%= f.text_area :title, autofocus: true %>
      </div>

      <div class="field">
        <label class="form-text">相談したいジャンル</label>
        <%= f.collection_select(:category_id, Category.all, :id, :name, {}, {class:"select-box"}) %>
      </div>

      <div class="field">
        <label class="form-text">相談したい内容</label>
        <%= f.text_area :outline, autofocus: true %>
      </div>

      <div class="field">
        <label class="form-text">LINE・メールの現状</label>
        <%= f.text_area :content, autofocus: true %>
      </div>

      <!-- LINE文入力フィールド -->
      <%= f.fields_for :messages do |t| %>
      <%= render "message_fields", f: t %>
      <% end %>

      <!-- 追加する場所 -->
      <div id="detail-association-insertion-point"></div>

      <!-- 追加ボタン -->
      <%= link_to_add_association "追加", f, :messages, 
          data: {
          association_insertion_node: '#detail-association-insertion-point',
          association_insertion_method: 'before'
          } %>

      <div class="submit">
        <%= f.submit "送信", class:"submit-btn" %>
      </div>
    <% end %>
</div>